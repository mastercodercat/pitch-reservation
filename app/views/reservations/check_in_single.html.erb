<% title "Single Reservation Checkin" %>
<% form_tag( {:controller => 'reservations', :action => "update"}, :method => "put" ) do %>
  <p>
    <%= @reservation.reserver.name %> is picking up the following equipment:
  </p>
  <strong><%= @reservation.equipment_model.name %></strong>
  <ul>
    <%= check_box_tag "reservations[#{@reservation.id}][checkin?]" %>
    <%= @reservation.equipment_model.name %> (<%= @reservation.equipment_object.name %>)
  </ul>
  <p>
    <strong>Checkin procedures:</strong>
    <ul>
      <% if @reservation.equipment_model.checkin_procedures.nil? %>
        no checkin procedures
      <% else %>
        <% @reservation.equipment_model.checkin_procedures.each do |checkin_procedure| %>
          <li style="list-style: none">
            <%= check_box_tag "reservations[#{@reservation.id}][checkin_procedures][]" %> <%= checkin_procedure %>
          </li>
        <% end %>
      <% end %>
    </ul>
  </p>
  <% if @reservation.due_date.to_date < Date.today %>
    <p>
      This equipment is <strong class="error">overdue.</strong><br />
      At a fee of <%= number_to_currency(@reservation.late_fee) %> / day, the renter owes <strong><%= number_to_currency(@reservation.late_fee * (Date.today - @reservation.due_date.to_date).to_i)  %></strong> total.
    </p>
  <% end %>
  <br>
  <%= submit_tag "Check in equipment" %>
<% end %>

