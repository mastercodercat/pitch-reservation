<% title (@equipment_model.nil? ? "Equipment Objects" : @equipment_model.name.pluralize) %>

<table id="equipment_model_table">
  <tr>
    <th>Equipment Model</th>
    <th>Name</th>
    <th>Serial (optional)</th>
    <th>Status</th>
  </tr>
  <% for equipment_object in @equipment_objects %>
    <% if equipment_object.deleted_at %>
      <tr class="deactivated">
      <% @toggle = "link_to \"Activate\", activate_path(:equipment_objects,equipment_object)" %>
    <% else %>
      <tr class= "activated">
      <% @toggle = "link_to \"De-Activate\", deactivate_path(:equipment_objects,equipment_object)" %>
    <% end %>
      <td><%= link_to equipment_object.equipment_model.name, equipment_object.equipment_model %></td>
      <td><%= link_to equipment_object.name, equipment_object %></td>
      <td><%= equipment_object.serial %></td>
      <td><%= equipment_object.status %></td>
      <% if current_user.is_admin_in_adminmode? %>
        <td><%= link_to "Edit", edit_equipment_object_path(equipment_object) %></td>
        <td><%= eval @toggle %></td>
        <td><%= link_to "Destroy", equipment_object, :confirm => 'This will permanently delete the Object from your database and could have unintended consequences. You might break all the things. Are you sure?', :method => :delete %></td>
      <% end %>
    </tr>
  <% end %>
</table>

<% if @equipment_model %>
  <p>
    <%= add_equipment_object_link("Add new "+@equipment_model.name.singularize) %>
  </p>
<% end %>

<p>
  <% if params[:show_accessories] %>
    <%= link_to "Hide Accessories", equipment_objects_path %>
  <% else %>
    <%= link_to "Show Accessories", equipment_objects_path(:show_accessories => true) %>
  <% end %>
  <% if current_user.is_admin_in_adminmode? %>
    <% if @equipment_model %>
     | <%= link_to ("New "+@equipment_model.name.singularize), new_equipment_model_equipment_object_path(@equipment_model) %>
     | <%= link_to "View All Equipment Objects", equipment_objects_path %>
    <% else %>
     | <%= link_to "New Equipment Object", new_equipment_object_path %>
    <% end %>

    <% if params[:show_deleted] %>
   | <%= link_to "Hide Deactivated Objects", equipment_objects_path %>
  <% else %>
   | <%= link_to "Show Deactivated Objects", equipment_objects_path(:show_deleted => true) %>
  <% end %>
  </p>
<% end %>
